"use strict";(self.webpackChunkphaser_plus_docs=self.webpackChunkphaser_plus_docs||[]).push([[381],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>v});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=m(n),u=r,v=c["".concat(l,".").concat(u)]||c[u]||d[u]||i;return n?a.createElement(v,o(o({ref:t},p),{},{components:n})):a.createElement(v,o({ref:t},p))}));function v(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,o[1]=s;for(var m=2;m<i;m++)o[m]=n[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5160:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>m});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:5},o="Game events",s={unversionedId:"guide/game-events",id:"guide/game-events",title:"Game events",description:"Separate your game logic into game events using flow.",source:"@site/docs/guide/game-events.md",sourceDirName:"guide",slug:"/guide/game-events",permalink:"/docs/guide/game-events",draft:!1,editUrl:"https://github.com/kalevski/phaser-plus/tree/main/_docs/docs/guide/game-events.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Debugging",permalink:"/docs/guide/debugging"},next:{title:"Perspective 2D",permalink:"/docs/guide/perspective2d"}},l={},m=[{value:"Events",id:"events",level:2},{value:"Time Events",id:"time-events",level:2},{value:"Collision Events (MatterJS)",id:"collision-events-matterjs",level:2}],p={toc:m},c="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"game-events"},"Game events"),(0,r.kt)("p",null,"Separate your game logic into game events using ",(0,r.kt)("strong",{parentName:"p"},"flow"),"."),(0,r.kt)("p",null,"phaser-plus comes with a mechanism for organizing your game logic in game events. ",(0,r.kt)("strong",{parentName:"p"},"Flow")," provides three event types at the moment:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Event")," - A game event that can be fired manually with a delay."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"TimeEvent")," - - A game event that is fired on an interval, with a delay on start."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"CollisionEvent")," - A MatterJS collision event that is fired when two labeled physics objects are colliding.")),(0,r.kt)("h2",{id:"events"},"Events"),(0,r.kt)("p",null,"To create a game event you need to create a subclass that extends ",(0,r.kt)("strong",{parentName:"p"},"Flow.Event")," and implement ",(0,r.kt)("strong",{parentName:"p"},"onFire")," method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=events/MyGameEvent.js showLineNumbers",title:"events/MyGameEvent.js",showLineNumbers:!0},"import { Flow } from '@phaser-plus/core'\n\nclass MyGameEvent extends Flow.Event {\n    \n    onCreate() {\n        // invoked when the event is added\n    }\n    \n    onFire(payload) {\n        // do something\n    }\n\n    onDestroy() {\n        // invoked when the event is removed\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"this.flow.events.add('my-game-event', MyGameEvent) // register the event\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// this line of code will trigger \"my-game-event\" after 2.5 seconds\nthis.flow.events.trigger('my-game-event', 'payload', 2.5)\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/examples/run?demo=game-events"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/CHECK_EXAMPLE-blue?style=for-the-badge",alt:"Check example"}))),(0,r.kt)("h2",{id:"time-events"},"Time Events"),(0,r.kt)("p",null,"Good example for time events is day-night cycle, in that cases you need to have a time event that detects the day time inside your game and invoke other game events in particular game time.\nTo implement that kind of feature you need to create class that extends Flow.TimeEvent"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=events/MyDayNightCycle.js showLineNumbers",title:"events/MyDayNightCycle.js",showLineNumbers:!0},"import { Flow } from '@phaser-plus/core'\n\nclass MyDayNightCycle extends Flow.TimeEvent {\n    \n    onCreate() {\n        // invoked when the event is added\n    }\n\n    onFire(times) {\n        // do something\n    }\n\n    onDestroy() {\n        // invoked when the event is removed\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"/**\n * the MyDayNightCycle will be at 1 second interval\n * the first time will be invoked after 3 seconeds\n */\n\nthis.flow.timer.add('day-night-cycle', MyDayNightCycle, 1, 3)\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/examples/run?demo=time-events"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/CHECK_EXAMPLE-blue?style=for-the-badge",alt:"Check example"}))),(0,r.kt)("h2",{id:"collision-events-matterjs"},"Collision Events (MatterJS)"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"At the momment, ",(0,r.kt)("strong",{parentName:"p"},"Flow.CollisionEvent")," works only with MatterJS")),(0,r.kt)("p",null,"When you are working on larger game you need a way to separate collision events depending on object whitch objects are colliding."),(0,r.kt)("p",null,"For that reason, Flow provides an API for registering multiple collision events."),(0,r.kt)("p",null,"Implementation of collision event look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=events/PlayerHitEnemyEvent.js showLineNumbers",title:"events/PlayerHitEnemyEvent.js",showLineNumbers:!0},"class PlayerHitEnemyEvent extends Flow.CollisionEvent {\n\n    onCreate() {\n        // invoked when the event is added\n    }\n\n    onEnter(bodyA, bodyB, event) {\n        // invoked when collision starts\n    }\n\n    onExit(bodyA, bodyB, event) {\n        // invoked when collision ends\n    }\n\n    onDestroy() {\n        // invoked when the event is removed\n    }\n\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"this.flow.physics.add('player-hit-enemy', PlayerHitEnemyEvent)\n\nthis.flow.physics.setCollision('player', 'enemy1', 'player-hit-enemy')\nthis.flow.physics.setCollision('player', 'enemy2', 'player-hit-enemy')\n\n/**\n * player-hit-enemy event will be triggered when physics object labeled as \"player\"\n * collides with objects labbeled as \"enemy1\" or \"enemy2\"\n */\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/examples/run?demo=collision-events"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/CHECK_EXAMPLE-blue?style=for-the-badge",alt:"Check example"}))))}d.isMDXComponent=!0}}]);